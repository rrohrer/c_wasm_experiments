<!DOCTYPE html>

<script type="module">
  async function init() {
    // setup functions that can be called from C:
    let cImports = { env: { print_num: function (num) { console.log("Your numer from c is: " + num); } } };

    // load the wasm module
    let wasmResponse = await fetch('add.wasm');
    let wasmBytes = await wasmResponse.arrayBuffer();
    let loadedWasm = await WebAssembly.instantiate(wasmBytes, cImports);

    // call some C code
    console.log("From js: " + loadedWasm.instance.exports.add(1, 3));
  };
  init();
</script>

</html>
